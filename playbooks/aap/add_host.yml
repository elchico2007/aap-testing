- name: Adding Host to AAP Controller
  hosts: localhost
  tasks:
    - name: Add host
      host:
        name: "{{ gen_name }}"
        description: "{{ host_add_inventory_desc }}"
        # awx_inventory_name is provided at runtime when running from AAP
        inventory: "{{ awx_inventory_name }}"
        state: present
        validate_certs: false
        variables:
          ansible_host: "{{ management_address.split('/')[0] }}"
          src_mac: "{{ src_mac }}"